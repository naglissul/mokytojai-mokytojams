<!DOCTYPE html>
<html lang="lt">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Konspektai - Mokytojai mokytojams</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.7.0/firebase-app.js";
      import {
        getDatabase,
        ref,
        onValue,
        runTransaction,
        set,
        get,
      } from "https://www.gstatic.com/firebasejs/11.7.0/firebase-database.js";

      const firebaseConfig = {
        apiKey: "AIzaSyAgr6yJwR8hSCyzP-YuSm7x0jyG6gauV48",
        authDomain: "mokytojai-mokytojams.firebaseapp.com",
        databaseURL:
          "https://mokytojai-mokytojams-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "mokytojai-mokytojams",
        storageBucket: "mokytojai-mokytojams.firebasestorage.app",
        messagingSenderId: "1034426927970",
        appId: "1:1034426927970:web:19115cc4b4496dde123a3b",
      };

      const app = initializeApp(firebaseConfig);
      const db = getDatabase(app);

      window.incrementCounter = function (id, field) {
        const fieldRef = ref(db, `counters/${id}/${field}`);
        runTransaction(fieldRef, (current) => (current || 0) + 1);
      };

      function updateDOM(id, field, value) {
        const el = document.getElementById(
          `${id}-${field === "downloads" ? 1 : 2}`
        );
        if (el) el.textContent = value;
      }

      function listenToCounter(id) {
        const counterRef = ref(db, `counters/${id}`);
        onValue(counterRef, (snap) => {
          const data = snap.val();
          if (!data) return;
          if (data.downloads !== undefined)
            updateDOM(id, "downloads", data.downloads);
          if (data.views !== undefined) updateDOM(id, "views", data.views);
        });
      }

      function initializeCounter(id) {
        const counterRef = ref(db, `counters/${id}`);
        get(counterRef).then((snap) => {
          if (!snap.exists()) {
            set(counterRef, { downloads: 0, views: 0 });
          }
        });
      }

      ["id1", "id2", "id3"].forEach((id) => {
        initializeCounter(id);
        listenToCounter(id);
      });
    </script>
</head>
  <body>
    <div class="container">
      <header class="site-header">
        <div class="header-content">
          <h1>Mokytojai mokytojams</h1>
          <p class="tagline">Dalijamės žiniomis, auginame ateitį</p>
          <div class="header-contact">
            <div>
              <p>Norite pasidalinti mokomąja medžiaga? Susisiekite su mumis:</p>
              <p><strong>Naglis Šuliokas</strong> – <a href="mailto:naglis.suliokas@gmail.com">naglis.suliokas@gmail.com</a></p>
              <p><strong>Rokas Rutkus</strong> – <a href="mailto:info@edup.lt">info@edup.lt</a></p>
            </div>                    
          </div>

        </div>
      </header>

      <main>


        
        <section class="resources-section">
          <h2>Medžiagos biblioteka</h2>

          <div class="resource-card">
            <div class="resource-info">
              <div class="resource-header">
                <span class="resource-category">Matematika</span>
              </div>
              <h4>Tikimybės</h4>
              <p class="resource-meta">
                <span class="update-date">Atnaujinta 2025-05-08</span>
              </p>
              <p class="resource-description">
                Šiame konspekte apžvelgiamas mokyklinis tikimybių teorijos kursas pagal atnaujintą programą. Vienoje vietoje šis 
                konspektas truputį išeina iš mokyklinės programos ribų (trumpai aptariama sąlyginė tikimybė). Tačiau sąlyginė tikimybė 
                pristatoma tik tam, kad prasmingai galėtų būti apibrėžta mokyklinė sąvoka – nepriklausomi įvykiai.
                Autorius V. Miežys
              </p>
              <div class="resource-actions">
                <a
                  href="./Tikimybių-teorijos-konspektas-(autorius-V.Miežys).pdf"
                  class="btn btn-preview"
                  onclick="incrementCounter('id3', 'views')"
                >
                  <span class="btn-icon">&#128065;</span>
                  Peržiūrėti
                  <span id="id3-2">(...)</span>
                </a>
                <a
                  download
                  href="./Tikimybių-teorijos-konspektas-(autorius-V.Miežys).pdf"
                  class="btn btn-download"
                  onclick="incrementCounter('id3', 'downloads')"
  
                >
                  <span class="btn-icon">&#8595;</span>
                  Atsisiųsti
                  <span id="id3-1">(...)</span>
                </a>
              </div>
            </div>
          </div> 

          <div class="resource-card">
            <div class="resource-info">
              <div class="resource-header">
                <span class="resource-category">Matematika</span>
              </div>
              <h4>Funkcijos</h4>
              <p class="resource-meta">
                <span class="update-date">Atnaujinta 2025-05-07</span>
              </p>
              <p class="resource-description">
                Nurodytos visų funkcijų apibrėžimo ir reikšmių sritys, eskizai.
                Autorė Z. Šiaulienė
              </p>
              <div class="resource-actions">
                <a
                  href="./Funkcijų-konspektas-(autorė-Z.-Šiaulienė).pdf"
                  class="btn btn-preview"
                  onclick="incrementCounter('id1', 'views')"
                >
                  <span class="btn-icon">&#128065;</span>
                  Peržiūrėti
                  <span id="id1-2">(...)</span>
                </a>
                <a
                  download
                  href="./Funkcijų-konspektas-(autorė-Z.-Šiaulienė).pdf"
                  class="btn btn-download"
                  onclick="incrementCounter('id1', 'downloads')"

                >
                  <span class="btn-icon">&#8595;</span>
                  Atsisiųsti
                  <span id="id1-1">(...)</span>
                </a>
              </div>
            </div>
          </div>
          <div class="resource-card">
            <div class="resource-info">
              <div class="resource-header">
                <span class="resource-category">Matematika</span>
              </div>
              <h4>Planimetrija</h4>
              <p class="resource-meta">
                <span class="update-date">Atnaujinta 2025-05-07</span>
              </p>
              <p class="resource-description">
                Mokyklinės planimetrijos konspektas. Sukurta 2012 m. Autorė Z. Šiaulienė
              </p>
              <div class="resource-actions">
                <a
                  href="./Mokyklinės-planimetrijos-konspektas-(autorė-Z.-Šiaulienė).pdf"
                  class="btn btn-preview"
                  onclick="incrementCounter('id2', 'views')"

                >
                  <span class="btn-icon">&#128065;</span>
                  Peržiūrėti
                  <span id="id2-2">(...)</span>
                </a>
                <a
                  download
                  href="./Mokyklinės-planimetrijos-konspektas-(autorė-Z.-Šiaulienė).pdf"
                  class="btn btn-download"
                  onclick="incrementCounter('id2', 'downloads')"

                >
                  <span class="btn-icon">&#8595;</span>
                  Atsisiųsti
                  <span id="id2-1">(...)</span>
                </a>
              </div>
            </div>
        </section>

        
      </main>

      <footer class="site-footer">
        <div class="footer-content">
          <p>Autorinės teisės priklauso paminėtiems autoriams</p>
          <p>
            Kontaktai: Naglis Šuliokas
            <a href="mailto:naglis.suliokas@gmail.com"
              >naglis.suliokas@gmail.com</a
            >
            ir Rokas Rutkus <a href="mailto:info@edup.lt">info@edup.lt</a>
          </p>
          <p>
            Tinklapio kodas:
            <a
              href="https://github.com/naglissul/mokytojai-mokytojams"
              target="_blank"
            >
              github.com/naglissul/mokytojai-mokytojams
            </a>
          </p>
        </div>
      </footer>
    </div>
  </body>
</html>
